language: java
jdk:
- oraclejdk8
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: cZ0FItWJEGTacfRoYy+Rh9y0QYQEOY3praKn/yLFoj8UdIYBUIZQyK2mDNBOck9EGCK1qt4cTTYpPE28xrmaRdClNg0WHnMwX/8qcyHghaMxnN0YDxYmQLPbfd/fK/D1fmbdB/2PF3GfEUNLBaMjh5t674ocIfyEDFGJN5b8ADizbfgwbE7Xw2PmLjNl5sEh3g77c4P++DxTjSm06NpbBNahv+SE2gMfU80WBaEG8Yo5mFhuQqu5j+cb5EZXT9ndKRpB8hhXVghIRpEeuv0tSJKVvtv3/chsXMC00zAM41V0MXO9Rfjr4fIzJg7hK6Q+Jb/d5RZBJODqzhKlLQo9fw3f8RWteFMn9SvvrA7dfytacLsSCFJU/+mg7Z1WV6rywa119nusQV7Y07KY9z6Z4jUBgYwjPVkESMDH2OOegqbUgQQMCrxZggVqEH1DecwZrgAMxL66XUVb/2pzcqen93Ti3IzhFPTHKtkvnF/OQ0sLxme5xu7yYSH7hFPYG75CGG4HRknr9HuMhE/A5Esgf+prYSiAix6NFmSPczKGMBxG3Mh3sJHl7DvMaDfCbArZUWC3Id6wy5A40dBdDZ9p7q7cLz2yduPrfzggKeX7g/WzpHr+7H9CrGcDfE/JeN+rio2BSzzrft6oqBBDxyedznW05dxSbFKxYv+VqSU/Yco=
install: /bin/true
script:
- ./gradlew clean ciBuild
deploy:
  provider: heroku
  api_key:
    secure: UMAIfJ95lRYBGDkIKmuT09MPtmlw3+nzt7rX9kUT23dlf6GpGqaTy2OvVnYehQVqt32U5+IdrRgSD/swiahUcVW/njWoUmITlAbgoJ40zv2ipwIjkzEAiowIpNJYGpRSXrOedk2zbWJQuo54W6x4IT/NG5k2Qz6EunWhszKiNRIWkMFsZcKNLKgg7CY6Fm0GU5CulDNbHmzIuL7CDXcSZb7iGcx8Q73kkS7wRBL2aNDMpxG2Zj9veJWxA18LPD4Tf95owRW95rV2w3OheyB4K1ZpJsl4TmTlRzICngs9QcFRPgcY865RxLvCo9gWn3UwQymEDealgAHBVFGgK5/SsZcziss7U2rw+kHA1MawOZkVXvi9LuG19VuFlltCqz7I0G4qmKffIJprJR3KVTUz9TIJk8ckv+kfSYVbtGcigUDP+RpX7ULyonQhjjHW51xEqtOvuihOodckzlzy6H13n8oRltEZelb4A+rGuNyPXWUMqYkdnl/dvvYdWelFZiNEHLFjWqUz8C5NelzWhHyTqdTE0XPfT478h+i/aw+bjLuA35sv0YDROF922DXrXJmr7veiAxbjevQHyPQjbMymzgESW65q3yyCWWZzt/3RsfD33ghWW/CPv7poGhOW09aa92lHhoAmc44meiNfkO5WJTo6G8Mo7VfWdXDwpLjJnUM=
  app: ct-payone-integration-staging
  on:
    repo: commercetools/commercetools-payone-integration
    branch: master
after_deploy:
- ./gradlew --continue -i :functionaltests:cleanTest :functionaltests:testSpec publishGhPages || travis_terminate 1
- ./travis-build.sh || travis_terminate 1
