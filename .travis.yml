language: java
jdk:
- oraclejdk8
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: MSKERDx3DUt1eAc+vLiQ/mrMIkTKUYsgod3JvuSb3O9ktM4hukLt6mfBUuvOWLaAY3Pj0NYx8MXJ7NklDrfq2hNdBSdpv/3d6pBxODWRwUrPdVK5SJsDs+eCWmYdJPHaRvV2d/sCfy4tRYdi4YEHaxig9yUEYZxUbReaIzH+qVnUMEfE84NS5q9KFH8S7bFhNtQJRIcMTKXRMkhoJ4QwsPYQGJjfcqA5Vniq6eFobFSWUhFCVKV+g6GwIJStA71yIxfN62g3jpc/So+WXxexgI+yzKctl7rod+DW2ZiOIjjKQS9Y53u1eLWtQDKhv1sZyDYMyaYEPGVYTlSXST5+OJoNuTV8j72aJItL9HuSmh34yMUUj/CZc+KQTfgIGTZcMC2XpM2epsN6VAYd2CZ+XjSLHkw/1M1xe+2cjbl5q46SJRaRaTjVcVxqB4666eQzWx0NamDl4Yo1cq1O34vX9kNgx7SUdOHDWJFv7ixjG8hBjKdWGz4Kadi7RxezaChNfttRQcd9xseT98XzA6LzZoqIE3yzS4D0e0BEkyE2GS9VrzfFlfpekjCCX2HRX8bK11NgxYw4Gy1K1DvvZpeiHzjCQh7gES3lb0bPuRfwYIR4k9YUrjjv8mnuU8BN5JJKDPl99uWCsaONJcoNk6s69yZ9nSazbIkR1cqG3ofRjbg=
install: /bin/true
script:
- ./gradlew clean ciBuild
deploy:
  provider: heroku
  api_key:
    secure: UMAIfJ95lRYBGDkIKmuT09MPtmlw3+nzt7rX9kUT23dlf6GpGqaTy2OvVnYehQVqt32U5+IdrRgSD/swiahUcVW/njWoUmITlAbgoJ40zv2ipwIjkzEAiowIpNJYGpRSXrOedk2zbWJQuo54W6x4IT/NG5k2Qz6EunWhszKiNRIWkMFsZcKNLKgg7CY6Fm0GU5CulDNbHmzIuL7CDXcSZb7iGcx8Q73kkS7wRBL2aNDMpxG2Zj9veJWxA18LPD4Tf95owRW95rV2w3OheyB4K1ZpJsl4TmTlRzICngs9QcFRPgcY865RxLvCo9gWn3UwQymEDealgAHBVFGgK5/SsZcziss7U2rw+kHA1MawOZkVXvi9LuG19VuFlltCqz7I0G4qmKffIJprJR3KVTUz9TIJk8ckv+kfSYVbtGcigUDP+RpX7ULyonQhjjHW51xEqtOvuihOodckzlzy6H13n8oRltEZelb4A+rGuNyPXWUMqYkdnl/dvvYdWelFZiNEHLFjWqUz8C5NelzWhHyTqdTE0XPfT478h+i/aw+bjLuA35sv0YDROF922DXrXJmr7veiAxbjevQHyPQjbMymzgESW65q3yyCWWZzt/3RsfD33ghWW/CPv7poGhOW09aa92lHhoAmc44meiNfkO5WJTo6G8Mo7VfWdXDwpLjJnUM=
  app: ct-payone-integration-staging
  on:
    repo: commercetools/commercetools-payone-integration
    branch: master
after_deploy:
- ./gradlew --continue --info :functionaltests:cleanTest :functionaltests:testSpec publishGhPages || travis_terminate 1
- ./travis-build.sh || travis_terminate 1
